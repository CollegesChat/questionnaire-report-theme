<script>
  document.addEventListener("DOMContentLoaded", function () {
    let arr = ["数据/", "universities/"];

    const hrefSelector = arr.map((s) => `[href$="${encodeURI(s)}"]`).join(", ");
    const selector = `aside a:is(${hrefSelector})`;
    const targetLinks = document.querySelectorAll(selector);

    targetLinks.forEach((link) => {
      link.removeAttribute("href");
      link.style.cursor = "pointer";
      link.addEventListener("click", function (e) {
        const isToggleButton = e.target.closest(
          "button, .hextra-sidebar-collapsible-button",
        );
        if (!isToggleButton) {
          // 5. 转发点击给子元素中的 span 或按钮
          const toggleBtn = link.querySelector(
            "button, .hextra-sidebar-collapsible-button, span",
          );
          if (toggleBtn) {
            toggleBtn.click();
            console.log("Hextra: 转发点击至子元素");
          }
        }
      });
    });
    arr = arr.filter((item) => item !== "数据/");
    const mainHrefSelector = arr
      .map((s) => `[href$="${encodeURI(s)}"]`)
      .join(", ");
    const mainSelector = `main a:is(${mainHrefSelector})`;
    const mainTargetLinks = document.querySelectorAll(mainSelector);
    mainTargetLinks.forEach((link) => {
      link.removeAttribute("href");
      link.style.cursor = "not-allowed";
      link.style.opacity = "0.5";
      link.title = `没有关于${link.textContent.trim()}的分类，因此被禁用`;
    });
  });
</script>
